<!DOCTYPE html>
<html lang="en">
  <head>
    <title>
    Software Matters!
        - Java Pain Points
    </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Mark Perry">
    <meta name="description" content="Static blog generated with JBake">

    <!-- Style -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootswatch/3.1.1/yeti/bootstrap.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <link rel="stylesheet" href="/css/base.css">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav icon -->
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/img/favicon.ico" type="image/x-icon">
  </head>
  <body>      
    <nav class="navbar navbar-default navbar-fixed-top " role="navigation">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Software Matters!</a>
        </div>
        
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
			<li><a href="/">Home</a></li>
			<li><a href="/pages/about.html">About</a></li>
			<li><a href="/pages/bio.html">Author</a></li>
			<li><a href="/archive.html">Archive</a></li>

          </ul>
        
        <!-- Right navigation -->
        <ul class="nav navbar-nav navbar-right">

          <li><a href="/feed.xml" title="Rss"><i class="fa fa-rss"></i> Feed</a></li>
        </ul>
        <!-- Right navigation end -->

      </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav><!-- /.navbar -->

    <!-- Begin page content -->
    <div class="container">
      
      <div class="row">
        <div class="col-md-12">
          <article>
            <div class="page-header"><h1>Java Pain Points</h1>
              <ol class="breadcrumb tagsbar">
                <li><a href="/tags/java.html">java</a></li>
                <li><a href="/tags/verbosity.html">verbosity</a></li>
                <li><a href="/tags/language.html">language</a></li>
                <li><a href="/tags/features.html">features</a></li>
              </ol>
            </div>
          <p class="post-meta">
            <i class="fa fa-calendar"></i>&nbsp;01 February 2012&nbsp;&nbsp;
            <i class="fa fa-user"></i>&nbsp;Mark Perry&nbsp;&nbsp;
              <i class="fa fa-comment"></i>&nbsp;<span class="badge"><a href="http://mperry.github.io/2012/02/01/java-pain-points.html#disqus_thread"></a></span>
          </p>
              <p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Java has been declared either dead or dying multiple times thoughout it&#8217;s life.  For Java programmers unaware of the debate, this can be very disconcerting.  I have used Java for the majority of my programming life and from my observations Java programmers are ignorant of other languages.  However, great Java programmers are the languages loudest critics, but what are the harshest Java pain points?</p>
</div>
<!-- more -->
<div class="ulist">
<ul>
<li>
<p>Explicit typing</p>
</li>
<li>
<p>Generic type erasure</p>
</li>
<li>
<p>Lambdas</p>
</li>
<li>
<p>Tail recursion</p>
</li>
<li>
<p>Contracts</p>
</li>
<li>
<p>Continuations</p>
</li>
<li>
<p>Meta-programming</p>
</li>
<li>
<p>Limited obvious types</p>
</li>
<li>
<p>Lack of unified type system</p>
</li>
<li>
<p>Immutability</p>
</li>
<li>
<p>Laziness</p>
</li>
<li>
<p>Pattern matching</p>
</li>
<li>
<p>Boilerplate</p>
</li>
<li>
<p>Concurrency</p>
</li>
<li>
<p>Multiple inheritance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_explicit_typing">Explicit Typing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dynamic/static typing and <a href="http://en.wikipedia.org/wiki/Type_inference">type inference</a> are often confused.  Statically typed languages <em>can</em> have type inference (e.g. Scala, Haskell and to a limted extent C#).  We have known about the Hindler-Milner type inference algorithm since 1969 (43 years) yet very few statically typed languages have type inference.  I predict this will gain more attention in the coming years.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generic_type_erasure_reification">Generic Type Erasure (Reification)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The problem with generic type erasure is shown nicely in Josh Bloch&#8217;s book <a href="http://www.amazon.com/Effective-Java-Programming-Language-Guide/dp/B003D3OFRA">Effective Java</a> (Chapter 5 - Generics).  Since arrays are erroneously covariant instead of invariant, generics should be used to improve your code for (weak) type safety.  Some problems with generics:
* Calling a method with a generic argument defaults the type of the argument to Object at runtime, calling a method that the programmer did not expect
* Cannot create objects of the generic type
* Others</p>
</div>
<div class="imageblock">
<div class="content">
<img src="http://ecx.images-amazon.com/images/I/51FKSNAV2GL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA300_SH20_OU01_.jpg" alt="51FKSNAV2GL. BO2,204,203,200 PIsitb sticker arrow click,TopRight,35, 76 AA300 SH20 OU01 ">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lambdas">Lambdas</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lambdas are coming to Java in version 8 (as of today, due mid 2013).  This will help ease generic programming in Java and the verbosity when using anonymous inner classes for simple function callbacks.  This is explained reasonably in this InfoQ article <a href="http://www.infoq.com/articles/lambdas-java-analysis">Lambas in Java: An In-Depth Analysis</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tail_recursion">Tail Recursion</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://en.wikipedia.org/wiki/Tail_call">Tail recursion</a> and tail call optimisation (TCO) are critical for functional programming and eliminating the repetition involved in loops (replace with maps and folds).  The Scala compiler converts tail calls to loops using TCO.  I have yet to see plans to include tail recursion in the JVM, but there seems to be some active research into how this can be done.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contracts">Contracts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Java has just the simple assert mechanism.  Support for <a href="http://en.wikipedia.org/wiki/Design_by_contract">Design by Contract</a> used to be in the <a href="http://bugs.sun.com/bugdatabase/top25_rfes.do">top 10</a> (actually second) most requested features, however the <a href="http://bugs.sun.com/view_bug.do?bug_id=4449383">request for enhancement 4449383</a> seems to have been closed.  Thinking broadly; proofs, types, contracts and unit tests have the following relationship to a program:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Proofs &#8658; General and strong theorems produced statically (but hard to prove and expensive to do)</p>
</li>
<li>
<p>Types &#8658; General but weak theorems (usually checked statically)</p>
</li>
<li>
<p>Contracts &#8658; General and strong theorems, checked at run time for particular instances (can be turned on or off)</p>
</li>
<li>
<p>Unit testing &#8658; Specific and strong theorems, checked quasi-statically on interesting cases</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These theorems are not well integrated in programming languages (presenting research opportunities).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_continuations">Continuations</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://en.wikipedia.org/wiki/Continuation">Continuations</a> would make web programming dead simple.  Just restore the state and continue the computation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_meta_programming">Meta-programming</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Poorly supported in Java, particularly compared to the dynamically typed languages Lisp, Erlang, Ruby, Groovy, etc.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_limited_obvious_types">Limited obvious types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Java Date and Time API is a mess.  Sure we can use Joda-Time until JSR 310 gets released (perhaps in Java 8), but this is a fundamental language type and it should be in the core library.</p>
</div>
<div class="paragraph">
<p>The double type is a poor implmentation of the decimal type <a href="http://en.wikipedia.org/wiki/Decimal_floating_point">IEEE 754</a>.  Consider the Java program below which shows mutliples of 0.1.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint linenums java language-java"><code>package mperry;

public class DoublePrecision {

    public static void main(String[] args) {
        final int max = 20;
        final double multiplier = 0.1;
        final int wrap = 10;
        for (int i = 0; i &lt; max; i++) {
            double d = i * multiplier;
            if (i % wrap == 0) {
                System.out.println();
            }
            System.out.print(i + ": " + d + " ");
        }
        System.out.println();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which produces the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>0: 0.0 1: 0.1 2: 0.2 3: 0.30000000000000004 4: 0.4 5: 0.5 6: 0.6000000000000001 7: 0.7000000000000001 8: 0.8 9: 0.9
10: 1.0 11: 1.1 12: 1.2000000000000002 13: 1.3 14: 1.4000000000000001 15: 1.5 16: 1.6 17: 1.7000000000000002 18: 1.8 19: 1.9000000000000001</pre>
</div>
</div>
<div class="paragraph">
<p>Also missing is simple tuples (see Python) and the Option type (for type safe handling of nulls - no more NullPointerException - <strong>EVER</strong>).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_unified_type_system">Unified Type System</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Java type system is a hodge-podge of different abstractions that lacks an elegant, unified model.  You need to work with arrays, classes and primitives.  Compare this to Scala&#8217;s type system.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../img/scala_classhierarchy.png" alt="scala classhierarchy">
</div>
</div>
<div class="paragraph">
<p>Java arrays are a pain to work with and are unfortunately covariant.  Primitves have to be boxed and unboxed and interact strangely with var args and generics.  Ugly!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_immutability">Immutability</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Java uses the final keyword to indicate immutability.  There are a few problems with this.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Immutability should be the default.</p>
</li>
<li>
<p>For objects, the immutability only applies to the reference, not the instance variables it contains.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Thus there is no way to indicate this a method is pure (is <a href="http://en.wikipedia.org/wiki/Referential_transparency_%28computer_science%29">referentially transparent</a>).  Even C++ could indicate this with it&#8217;s const keyword.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_laziness">Laziness</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Laziness in programming languages is really useful.  From wikipedia on <a href="http://en.wikipedia.org/wiki/Lazy_evaluation">lazy evaluation</a>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="ulist">
<ul>
<li>
<p>Performance increases due to avoiding unnecessary calculations and avoiding error conditions in the evaluation of compound expressions.</p>
</li>
<li>
<p>The capability of constructing potentially infinite data structures</p>
</li>
<li>
<p>The capability of defining control structures as abstractions instead of as primitives.</p>
</li>
</ul>
</div>
</blockquote>
<div class="attribution">
&#8212; Wikipedia
</div>
</div>
<div class="paragraph">
<p>Without referential transparency, I don&#8217;t see how it can ever include lazy evaluation without building this into the language primitives, ala <a href="http://en.wikipedia.org/wiki/Short-circuit_evaluation">short circuit evaluation</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pattern_matching">Pattern matching</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I don&#8217;t mean regular expression pattern matching, but <a href="http://apocalisp.wordpress.com/2009/08/21/structural-pattern-matching-in-java/">structural pattern matching using algebraic data types</a>.  Commonly the Interpreter and Visitor pattern is used to simulate pattern matching, but this gets ugly - fast!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_boilerplate">Boilerplate</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This can involve:
* automatic resource management (see <a href="http://www.oracle.com/technetwork/articles/java/trywithresources-401775.html">Better Resource Management with Java SE 7: Beyond Syntactic Sugar</a>)
* properties (see <a href="http://projectlombok.org/">Project Lombok</a>)
* missing list and map literals (note: this is now available in Java 7)
* poor data representation that results in reams of XML configuration
* others?</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concurrency">Concurrency</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The fork/join framework is a step in the right direction, but still dominant is the lock/semaphore/monitor paradigm created in the 60s over 40 years ago.  How many people are sure their concurrent code is correct in all situations?  Software transactional memory implementations look like they <a href="http://en.wikipedia.org/wiki/Software_transactional_memory#Java">exist in Java</a>, but I have not tried any myself.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_multiple_inheritance">Multiple inheritance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Eiffel did this right, but C++ created nightmares with diamond inheritance which tainted the entire concept.  Scala seems to be bringing this back in a limited way with traits.</p>
</div>
<div class="paragraph">
<p>&#8230;and I haven&#8217;t even mentioned the modularity coming in Java 8.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references">References</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A few references that I thought made good reading:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://codemonkeyism.com/java-dead/">Is Java dead?</a></p>
</li>
<li>
<p><a href="http://www.25hoursaday.com/CsharpVsJava.html#conclusion2k7">A comparison of Microsoft&#8217;s c# programming language to Sun Microsystems' Java programming language</a></p>
</li>
<li>
<p><a href="http://www.slideshare.net/jeffz/why-java-sucks-and-c-rocks-final">Why Java Sucks &amp; C# Rocks</a></p>
</li>
<li>
<p><a href="http://www.amazon.com/Beyond-Java-Bruce-Tate/dp/0596100949">Beyond Java</a></p>
</li>
<li>
<p><a href="http://www.cis.upenn.edu/~bcpierce/types/archives/1988/msg00042.html">Hindler email archive on history of type inference algorithm</a></p>
</li>
<li>
<p><a href="http://www.enotes.com/topic/Type_inference">Layman&#8217;s type inference</a></p>
</li>
</ul>
</div>
</div>
</div></p>
      <div class="share">
  <!-- Facebook -->
          <a href="http://www.facebook.com/sharer.php?u=http://mperry.github.io2012/02/01/java-pain-points.html" target="_blank"><img src="/img/sharebuttons/facebook.png" alt="Facebook" /></a>
  <!-- Google+ -->
          <a href="https://plus.google.com/share?url=http://mperry.github.io2012/02/01/java-pain-points.html" target="_blank"><img src="/img/sharebuttons/google_plus.png" alt="Google" /></a>
  <!-- Twitter -->
          <a href="http://twitter.com/share?url=http://mperry.github.io2012/02/01/java-pain-points.html&text=Java Pain Points mperry.github.io2012/02/01/java-pain-points.html" target="_blank"><img src="/img/sharebuttons/twitter.png" alt="Twitter" /></a>
      </div>
<hr>
<section class="comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'maperry78'; // required: replace example with your forum shortname
  
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>            </article>
        </div> <!-- /.col-md-12 -->
      </div> <!-- /.row -->
        
      </div><!-- /.container -->

    <footer>
      <div class="container">
        <hr>
        <div class="row">
          <div class="col-xs-10">
            <p class="text-muted credit">&copy;  2014 | Mixed with <a href="http://getbootstrap.com/">Bootstrap v3.1.1</a> | Baked with <a href="http://jbake.org">JBake v2.3.1</a> | <i title="Linux" class="fa fa-linux"></i></p>
          </div>
          <div class="col-xs-2 gotop">
            <a href="#"><i class="fa fa-arrow-circle-up"> top</i></a>
          </div>
        </div>
      </div>
    </footer>

    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-28753951-1', 'auto');
      ga('send', 'pageview');

    </script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/1.6/gist-embed.min.js"></script>
    
    <script src="//cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
    <script type="text/javascript">
      <!-- load prettify only when needed -->
      $(document).ready(function(){
        var prettify = false;
        var classToAdd = 'prettyprint snippet';
        $("pre > code").each(function() {
          $("pre > code").parent().addClass(classToAdd);
          prettify = true;
        });
        if(prettify) {
          prettyPrint();
        }
      });
    </script>

    <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'maperry78'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
    </script>

        </body>
</html>
